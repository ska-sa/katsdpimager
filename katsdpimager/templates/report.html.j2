<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Spectral imager report</title>
    {{ resources | safe | indent(8) }}
    {{ script | safe | indent(8) }}
  </head>
  <body>
{% for target in targets %}
    <h1>{{ target.name }}</h1>
    <p>{{ target.description }}</p>
    <table>
      <caption>Channels</caption>
      <tbody>
        <tr>
          <th scope="row">Successful</th>
          <td>{{ target.status|select("equalto", "complete")|list|count }}</td>
        </tr>
        <tr>
          <th scope="row">Flagged</th>
          <td>{{ target.status|select("equalto", "no-data")|list|count }}</td>
        </tr>
        <tr>
          <th scope="row">Masked</th>
          <td>{{ target.status|select("equalto", "masked")|list|count }}</td>
        </tr>
        <tr>
          <th scope="row">Failed</th>
          <td>{{ target.status|select("equalto", "failed")|list|count }}</td>
        </tr>
        <tr>
          <th scope="row">Total</th>
          <td>{{ common.channels }}</td>
        </tr>
      </tbody>
    </table>
    {{ target.plots['status'] | safe | indent(4) }}
    {{ target.plots['flux'] | safe | indent(4) }}
{% endfor %}
  </body>
</html>
